OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 10ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.2ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by DataImportsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'E0clHDt_Fn7qrEpf-sYMUQ' LIMIT 1
  [1m[36mSQL (5.2ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:37:11 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "E0clHDt_Fn7qrEpf-sYMUQ"], ["updated_at", Sat, 18 Jan 2014 08:37:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 7ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#new as HTML
Completed 200 OK in 4ms (Views: 4.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#create as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'L4IRBIFLwQKMMHLiQ0tsGw' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:41:23 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "L4IRBIFLwQKMMHLiQ0tsGw"], ["updated_at", Sat, 18 Jan 2014 08:41:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Z7ivIGxks3sa9SZ5JEZ0LQ' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:41:23 UTC +00:00], ["remember_token", "Z7ivIGxks3sa9SZ5JEZ0LQ"], ["updated_at", Sat, 18 Jan 2014 08:41:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Z7ivIGxks3sa9SZ5JEZ0LQ' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Z7ivIGxks3sa9SZ5JEZ0LQ' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by DataImportsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'LSa-o6a_R2e_EsxQkj9eOw' LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:42:18 UTC +00:00], ["identity_url", "a"], ["remember_token", "LSa-o6a_R2e_EsxQkj9eOw"], ["updated_at", Sat, 18 Jan 2014 08:42:18 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '51PUY_kKIKDMT68uRa7LgA' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:42:18 UTC +00:00], ["remember_token", "51PUY_kKIKDMT68uRa7LgA"], ["updated_at", Sat, 18 Jan 2014 08:42:18 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '51PUY_kKIKDMT68uRa7LgA' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '51PUY_kKIKDMT68uRa7LgA' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'bbafV932MCNEBiEMFnBo9A' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:42:18 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "bbafV932MCNEBiEMFnBo9A"], ["updated_at", Sat, 18 Jan 2014 08:42:18 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'JDTYv52OlsgPooeyHCnTkA' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:52:32 UTC +00:00], ["remember_token", "JDTYv52OlsgPooeyHCnTkA"], ["updated_at", Sat, 18 Jan 2014 08:52:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'JDTYv52OlsgPooeyHCnTkA' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'JDTYv52OlsgPooeyHCnTkA' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '1Yxt4LB9tG6LQU2Wf4pwwA' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:52:32 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "1Yxt4LB9tG6LQU2Wf4pwwA"], ["updated_at", Sat, 18 Jan 2014 08:52:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'CupIgcKJo1gN45HVrMY9wg' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:52:32 UTC +00:00], ["identity_url", "a"], ["remember_token", "CupIgcKJo1gN45HVrMY9wg"], ["updated_at", Sat, 18 Jan 2014 08:52:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
Completed 200 OK in 4ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:52:32 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 08:52:32 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:52:32 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 08:52:32 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1[0m  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 08:52:32 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[35m (0.9ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1  [["price", #<BigDecimal:7fd7ccc8e618,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2[0m  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2  [["price", #<BigDecimal:7fd7ccf5de48,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3[0m  [["price", #<BigDecimal:7fd7ce82f200,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:52:33 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'e3nIKxBLOrDUDSKeLV4e0w' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:53:51 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "e3nIKxBLOrDUDSKeLV4e0w"], ["updated_at", Sat, 18 Jan 2014 08:53:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Qe9aka95SkyikjnKaQc5Ng' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:53:51 UTC +00:00], ["remember_token", "Qe9aka95SkyikjnKaQc5Ng"], ["updated_at", Sat, 18 Jan 2014 08:53:51 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Qe9aka95SkyikjnKaQc5Ng' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Qe9aka95SkyikjnKaQc5Ng' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'ffjoWRXnp_pwTK0yR2nCtg' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:53:52 UTC +00:00], ["identity_url", "a"], ["remember_token", "ffjoWRXnp_pwTK0yR2nCtg"], ["updated_at", Sat, 18 Jan 2014 08:53:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 7ms (ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '0uRhEJWF0Hj_GlOgjXlCFw' LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:55:55 UTC +00:00], ["remember_token", "0uRhEJWF0Hj_GlOgjXlCFw"], ["updated_at", Sat, 18 Jan 2014 08:55:55 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '0uRhEJWF0Hj_GlOgjXlCFw' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '0uRhEJWF0Hj_GlOgjXlCFw' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '1svgNl15HzH4lhEpQZpNRg' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00], ["identity_url", "a"], ["remember_token", "1svgNl15HzH4lhEpQZpNRg"], ["updated_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'OJyaIKhBEJJZ4OIJyvs3Dw' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "OJyaIKhBEJJZ4OIJyvs3Dw"], ["updated_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 7ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:55:56 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7ff425e15868,'0.95E2',9(27)>]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "items"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'tO9bnvxjajbvBMbb3GLB3g' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "tO9bnvxjajbvBMbb3GLB3g"], ["updated_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Nn5dVY6kdrhU3q1Slmc0gg' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00], ["remember_token", "Nn5dVY6kdrhU3q1Slmc0gg"], ["updated_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Nn5dVY6kdrhU3q1Slmc0gg' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Nn5dVY6kdrhU3q1Slmc0gg' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'cXZFmfwDXDmU_apQwlLPaQ' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00], ["identity_url", "a"], ["remember_token", "cXZFmfwDXDmU_apQwlLPaQ"], ["updated_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.2ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:56:28 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)[0m  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7f95c325c898,'0.95E2',9(27)>]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "items"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.2ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 7ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.5ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.2ms)
Completed 200 OK in 4ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'ibINn2fEDDIilt4szKM53w' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:58:01 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "ibINn2fEDDIilt4szKM53w"], ["updated_at", Sat, 18 Jan 2014 08:58:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'HAGNzkuG40eXNxOXYW4NoA' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:58:01 UTC +00:00], ["remember_token", "HAGNzkuG40eXNxOXYW4NoA"], ["updated_at", Sat, 18 Jan 2014 08:58:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'HAGNzkuG40eXNxOXYW4NoA' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'HAGNzkuG40eXNxOXYW4NoA' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '3QK3SlNq-r8_Pgt5_n67gQ' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:58:02 UTC +00:00], ["identity_url", "a"], ["remember_token", "3QK3SlNq-r8_Pgt5_n67gQ"], ["updated_at", Sat, 18 Jan 2014 08:58:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by DataImportsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.5ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'gz9BKRYsR_PaqFPY9jwhUA' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "gz9BKRYsR_PaqFPY9jwhUA"], ["updated_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'FC3MYOtK1-YUMkCxvnPHqg' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00], ["remember_token", "FC3MYOtK1-YUMkCxvnPHqg"], ["updated_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'FC3MYOtK1-YUMkCxvnPHqg' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'FC3MYOtK1-YUMkCxvnPHqg' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'ZijaXgHfh5I1u8f0PFvywQ' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00], ["identity_url", "a"], ["remember_token", "ZijaXgHfh5I1u8f0PFvywQ"], ["updated_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1[0m  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1  [["price", #<BigDecimal:7fe1982fbe68,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2[0m  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2  [["price", #<BigDecimal:7fe1983f9360,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:58:51 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:58:52 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 08:58:52 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:58:52 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 08:58:52 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 08:58:52 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:58:52 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 08:58:52 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3[0m  [["price", #<BigDecimal:7fe1984a7d48,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 08:58:52 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:58:52 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 08:58:52 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:58:52 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:58:52 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:58:52 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:58:52 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:58:52 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:58:52 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:58:52 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:58:52 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fe198553c88,'0.95E2',9(27)>]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "items"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 7ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.6ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.9ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1[0m  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1  [["price", #<BigDecimal:7fab192005f0,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2[0m  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2  [["price", #<BigDecimal:7fab1e812498,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[36m (3.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3[0m  [["price", #<BigDecimal:7fab1e873310,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fab1e8cbec0,'0.95E2',9(27)>]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "items"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 7ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
Completed 200 OK in 4ms (Views: 4.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Nk48-jrasg-u9TX3aqvvnA' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00], ["remember_token", "Nk48-jrasg-u9TX3aqvvnA"], ["updated_at", Sat, 18 Jan 2014 08:59:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Nk48-jrasg-u9TX3aqvvnA' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Nk48-jrasg-u9TX3aqvvnA' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'QlCypwRQRSBr8bd5lQOm3w' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:03 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "QlCypwRQRSBr8bd5lQOm3w"], ["updated_at", Sat, 18 Jan 2014 08:59:03 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'FFYl3fjPutufrQ2MI5UvLg' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:03 UTC +00:00], ["identity_url", "a"], ["remember_token", "FFYl3fjPutufrQ2MI5UvLg"], ["updated_at", Sat, 18 Jan 2014 08:59:03 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.5ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.9ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '2JRqKREWM9drYFl6ivCHrQ' LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["remember_token", "2JRqKREWM9drYFl6ivCHrQ"], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '2JRqKREWM9drYFl6ivCHrQ' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '2JRqKREWM9drYFl6ivCHrQ' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '3n1TT1DM9cFvJaCzyInCbA' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["identity_url", "a"], ["remember_token", "3n1TT1DM9cFvJaCzyInCbA"], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'fYDdIGifkxIlGhEmGwtb8w' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "fYDdIGifkxIlGhEmGwtb8w"], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1[0m  [["price", #<BigDecimal:7f82cf9a96e8,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2[0m  [["price", #<BigDecimal:7f82cc7da2e8,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3[0m  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3  [["price", #<BigDecimal:7f82ce0cb108,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 08:59:15 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)[0m  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7f82cc7e3ca8,'0.95E2',9(27)>]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "items"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by DataImportsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 38ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.4ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.2ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by DataImportsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1[0m  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1  [["price", #<BigDecimal:7ffa1d86c350,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2[0m  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2  [["price", #<BigDecimal:7ffa1def7058,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3[0m  [["price", #<BigDecimal:7ffa1dff3a38,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7ffa1f0958c8,'0.95E2',9(27)>]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "items"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "merchants"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '2iy0LI4JDAi4SbkjjgQClg' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "2iy0LI4JDAi4SbkjjgQClg"], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Nk3fkl21NNizjgqtkhsl5A' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["remember_token", "Nk3fkl21NNizjgqtkhsl5A"], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Nk3fkl21NNizjgqtkhsl5A' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Nk3fkl21NNizjgqtkhsl5A' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'CblaWVk9Qq29tOEvCEKZlA' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00], ["identity_url", "a"], ["remember_token", "CblaWVk9Qq29tOEvCEKZlA"], ["updated_at", Sat, 18 Jan 2014 09:00:10 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.5ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (1.0ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.9ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.9ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1[0m  [["price", #<BigDecimal:7fe365873200,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2[0m  [["price", #<BigDecimal:7fe365ee17b8,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3[0m  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3  [["price", #<BigDecimal:7fe365fe6a50,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)[0m  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fe367098740,'0.95E2',9(27)>]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "merchants"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "items"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '38o48KwlkgZXKBd4QdMMfg' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["identity_url", "a"], ["remember_token", "38o48KwlkgZXKBd4QdMMfg"], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'PklDZn8lahMJ2FOUPNZq_Q' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "PklDZn8lahMJ2FOUPNZq_Q"], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'qxZfw7__kT_37pMk40EPjA' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00], ["remember_token", "qxZfw7__kT_37pMk40EPjA"], ["updated_at", Sat, 18 Jan 2014 09:01:04 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'qxZfw7__kT_37pMk40EPjA' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'qxZfw7__kT_37pMk40EPjA' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.4ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.5ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'k3I0i2MfetV-cmLm3S5zFg' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:05:26 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "k3I0i2MfetV-cmLm3S5zFg"], ["updated_at", Sat, 18 Jan 2014 09:05:26 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Kj1k6YUlIwvBJTOqu0b1vg' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:05:26 UTC +00:00], ["remember_token", "Kj1k6YUlIwvBJTOqu0b1vg"], ["updated_at", Sat, 18 Jan 2014 09:05:26 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Kj1k6YUlIwvBJTOqu0b1vg' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Kj1k6YUlIwvBJTOqu0b1vg' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '7aT6c3lHB3-NBrmmISG2lg' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["identity_url", "a"], ["remember_token", "7aT6c3lHB3-NBrmmISG2lg"], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1[0m  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1  [["price", #<BigDecimal:7fe39ed29bd0,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2[0m  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2  [["price", #<BigDecimal:7fe39ee10260,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3[0m  [["price", #<BigDecimal:7fe39eed62d0,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fe39ef86270,'0.95E2',9(27)>]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "items"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "merchants"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by DataImportsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 6ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myopenid' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'iTc7Rt7tvt16FcdS_Ju8Aw' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00], ["identity_url", "http://openid.com/myopenid"], ["remember_token", "iTc7Rt7tvt16FcdS_Ju8Aw"], ["updated_at", Sat, 18 Jan 2014 09:05:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#new as HTML
Completed 200 OK in 40ms (Views: 39.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#create as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.6ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.9ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://myurl.com' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'BM37Ukd83W8p3GGc5cAbVg' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["identity_url", "http://myurl.com"], ["remember_token", "BM37Ukd83W8p3GGc5cAbVg"], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'nm5MCQMQPhrDUVo8xzJBNA' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "nm5MCQMQPhrDUVo8xzJBNA"], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'nB1mWQKUG8fOXrWCUZ1-YQ' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["remember_token", "nB1mWQKUG8fOXrWCUZ1-YQ"], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'nB1mWQKUG8fOXrWCUZ1-YQ' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'nB1mWQKUG8fOXrWCUZ1-YQ' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '_VGhBtJoiGLxCoIIVllnNg' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["identity_url", "a"], ["remember_token", "_VGhBtJoiGLxCoIIVllnNg"], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
Completed 200 OK in 3ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1[0m  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1  [["price", #<BigDecimal:7fb4c6e84a18,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2[0m  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2  [["price", #<BigDecimal:7fb4c9145688,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3[0m  [["price", #<BigDecimal:7fb4c91c6508,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:07:54 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fb4c922f0a8,'0.95E2',9(27)>]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "items"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "merchants"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.6ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (1.0ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1[0m  [["price", #<BigDecimal:7fb10bc6b8a8,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2[0m  [["price", #<BigDecimal:7fb10ccd9f78,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3[0m  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3  [["price", #<BigDecimal:7fb10cf45d20,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:08:57 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)[0m  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fb10e018170,'0.95E2',9(27)>]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "merchants"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "items"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'RqFdvDPcQ3HkQ79XV4zmtA' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:08:58 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "RqFdvDPcQ3HkQ79XV4zmtA"], ["updated_at", Sat, 18 Jan 2014 09:08:58 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'fRp7kVIfn7rSAe5n5w8sQw' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:08:58 UTC +00:00], ["remember_token", "fRp7kVIfn7rSAe5n5w8sQw"], ["updated_at", Sat, 18 Jan 2014 09:08:58 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'fRp7kVIfn7rSAe5n5w8sQw' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'fRp7kVIfn7rSAe5n5w8sQw' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'wotYLEiPW8Nr86Iwo_Mrqg' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:08:58 UTC +00:00], ["identity_url", "a"], ["remember_token", "wotYLEiPW8Nr86Iwo_Mrqg"], ["updated_at", Sat, 18 Jan 2014 09:08:58 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#new as HTML
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.3ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.9ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
  Parameters: {"open_id_identifier"=>"http://openid.com/myopenid"}
Completed 401 Unauthorized in 7630ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by DataImportsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'bIhRP2RpDykm6I4lqeZouA' LIMIT 1[0m
  [1m[35mSQL (2.5ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:21:00 UTC +00:00], ["remember_token", "bIhRP2RpDykm6I4lqeZouA"], ["updated_at", Sat, 18 Jan 2014 09:21:00 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'bIhRP2RpDykm6I4lqeZouA' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'bIhRP2RpDykm6I4lqeZouA' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'FdJrLafIB_a-BwB8Hxke4Q' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "FdJrLafIB_a-BwB8Hxke4Q"], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '0uPurMnckxpJMgvcM9Ivtg' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["identity_url", "a"], ["remember_token", "0uPurMnckxpJMgvcM9Ivtg"], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1[0m  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1  [["price", #<BigDecimal:7fe71e165398,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2[0m  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2  [["price", #<BigDecimal:7fe71cb44348,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3[0m  [["price", #<BigDecimal:7fe71cf7e698,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:21:01 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fe71e0bfa60,'0.95E2',9(27)>]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "items"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "merchants"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.4ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[35m (0.9ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1[0m  [["price", #<BigDecimal:7f8b4b7e8758,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2[0m  [["price", #<BigDecimal:7f8b4c6b49f8,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3[0m  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3  [["price", #<BigDecimal:7f8b4d952ab0,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)[0m  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7f8b4da29fb0,'0.95E2',9(27)>]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "items"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "merchants"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'znT7XVbZ2_GEShpmbXrhiA' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "znT7XVbZ2_GEShpmbXrhiA"], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'MVKr3saxKqr3z_E1D78JkQ' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00], ["remember_token", "MVKr3saxKqr3z_E1D78JkQ"], ["updated_at", Sat, 18 Jan 2014 09:25:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'MVKr3saxKqr3z_E1D78JkQ' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'MVKr3saxKqr3z_E1D78JkQ' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'TvH-mhhrz8AZo-GsGpLpWQ' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:25:16 UTC +00:00], ["identity_url", "a"], ["remember_token", "TvH-mhhrz8AZo-GsGpLpWQ"], ["updated_at", Sat, 18 Jan 2014 09:25:16 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#new as HTML
Completed 200 OK in 4ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
  Parameters: {"open_id_identifier"=>"http://openid.com/myopenid"}
Completed 500 Internal Server Error in 0ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.2ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
  Parameters: {"open_id_identifier"=>"https://www.google.com/"}
Completed 500 Internal Server Error in 0ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
Completed 200 OK in 4ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by DataImportsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'tN47efdpGWp84uh99MUZdw' LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["identity_url", "a"], ["remember_token", "tN47efdpGWp84uh99MUZdw"], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'jDpLpPKQbZCVg1iaG1DBqw' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["remember_token", "jDpLpPKQbZCVg1iaG1DBqw"], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'jDpLpPKQbZCVg1iaG1DBqw' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'jDpLpPKQbZCVg1iaG1DBqw' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'ooxYRHRZj6Nu-Bdl-VuEHA' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "ooxYRHRZj6Nu-Bdl-VuEHA"], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1[0m  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1  [["price", #<BigDecimal:7ff110f869a8,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2[0m  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2  [["price", #<BigDecimal:7ff110007130,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3[0m  [["price", #<BigDecimal:7ff11184c038,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:26:05 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7ff1118b4bd8,'0.95E2',9(27)>]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "items"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "merchants"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.5ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.5ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
  Parameters: {"open_id_identifier"=>"https://www.google.com/"}
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.6ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'NnCSRo1DMoqnHe5yZJfTlg' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:32 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "NnCSRo1DMoqnHe5yZJfTlg"], ["updated_at", Sat, 18 Jan 2014 09:27:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'gbgNbsMUyMeYrWfo6V_UcQ' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:32 UTC +00:00], ["remember_token", "gbgNbsMUyMeYrWfo6V_UcQ"], ["updated_at", Sat, 18 Jan 2014 09:27:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'gbgNbsMUyMeYrWfo6V_UcQ' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'gbgNbsMUyMeYrWfo6V_UcQ' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 't0C1WbQF-wGfh5cpiDSHAA' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:32 UTC +00:00], ["identity_url", "a"], ["remember_token", "t0C1WbQF-wGfh5cpiDSHAA"], ["updated_at", Sat, 18 Jan 2014 09:27:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.2ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
  Parameters: {"open_id_identifier"=>"https://www.google.com/"}
Completed 500 Internal Server Error in 1062ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by DataImportsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[36m (2.5ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.2ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1[0m  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1  [["price", #<BigDecimal:7fbe9be84688,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2[0m  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2  [["price", #<BigDecimal:7fbea1000b88,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3[0m  [["price", #<BigDecimal:7fbe9f6910d0,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:27:34 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fbe9f783948,'0.95E2',9(27)>]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "items"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "merchants"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.2ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.5ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1[0m  [["price", #<BigDecimal:7fd2e6800938,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2[0m  [["price", #<BigDecimal:7fd2e4550d48,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3[0m  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3  [["price", #<BigDecimal:7fd2e47cecc8,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)[0m  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fd2e50aa158,'0.95E2',9(27)>]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "items"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "merchants"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '4RKx9WqLeaW9PUw4Q9Uwcw' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00], ["identity_url", "a"], ["remember_token", "4RKx9WqLeaW9PUw4Q9Uwcw"], ["updated_at", Sat, 18 Jan 2014 09:27:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (1.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '7Lh9jUrCXKlPZ-UtdJK5sQ' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:39 UTC +00:00], ["remember_token", "7Lh9jUrCXKlPZ-UtdJK5sQ"], ["updated_at", Sat, 18 Jan 2014 09:27:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '7Lh9jUrCXKlPZ-UtdJK5sQ' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '7Lh9jUrCXKlPZ-UtdJK5sQ' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'PSOpXGlDCP3gRpyjcfVWLQ' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:27:39 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "PSOpXGlDCP3gRpyjcfVWLQ"], ["updated_at", Sat, 18 Jan 2014 09:27:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
  Parameters: {"open_id_identifier"=>"https://www.google.com/"}
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.6ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (1.0ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1[0m  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1  [["price", #<BigDecimal:7fafb915aa20,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2[0m  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2  [["price", #<BigDecimal:7fafb9239130,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3[0m  [["price", #<BigDecimal:7fafb9271fa8,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:28:03 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fafb92dab48,'0.95E2',9(27)>]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "merchants"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "items"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 7ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
  Parameters: {"open_id_identifier"=>"https://www.google.com/"}
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.3ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (1.0ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.9ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'TzYJCw95wgyLpO9dpOuHyA' LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:35:18 UTC +00:00], ["remember_token", "TzYJCw95wgyLpO9dpOuHyA"], ["updated_at", Sat, 18 Jan 2014 09:35:18 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'TzYJCw95wgyLpO9dpOuHyA' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'TzYJCw95wgyLpO9dpOuHyA' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (1.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'knWCJ23dYl_pK2l_lXxKow' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "knWCJ23dYl_pK2l_lXxKow"], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '1nmCQxYzjbEf6u2SQOqEhw' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["identity_url", "a"], ["remember_token", "1nmCQxYzjbEf6u2SQOqEhw"], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 7ms (ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1[0m  [["price", #<BigDecimal:7fcdb7bf2548,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2[0m  [["price", #<BigDecimal:7fcdb7d19db8,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3[0m  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3  [["price", #<BigDecimal:7fcdb7de1fc0,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:35:19 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)[0m  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fcdb7e99ad0,'0.95E2',9(27)>]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "merchants"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "items"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
  Parameters: {"open_id_identifier"=>"https://www.google.com/"}
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.6ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.9ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.5ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
  Parameters: {"open_id_identifier"=>"https://www.google.com/"}
Completed 500 Internal Server Error in 16357ms
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 5.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'kJa0XiDockiYT9_m7Q9InQ' LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:36:44 UTC +00:00], ["identity_url", "a"], ["remember_token", "kJa0XiDockiYT9_m7Q9InQ"], ["updated_at", Sat, 18 Jan 2014 09:36:44 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'ZT-CCxDQflvDoCC2owaYFQ' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:36:45 UTC +00:00], ["remember_token", "ZT-CCxDQflvDoCC2owaYFQ"], ["updated_at", Sat, 18 Jan 2014 09:36:45 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'ZT-CCxDQflvDoCC2owaYFQ' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'ZT-CCxDQflvDoCC2owaYFQ' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'pHgovcu9TA28TPKf7ZEHaw' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:36:45 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "pHgovcu9TA28TPKf7ZEHaw"], ["updated_at", Sat, 18 Jan 2014 09:36:45 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.6ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[35m (2.0ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1[0m  [["price", #<BigDecimal:7f99a8a58518,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2[0m  [["price", #<BigDecimal:7f99ac497350,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3[0m  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3  [["price", #<BigDecimal:7f99ac6b7f18,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:37:27 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)[0m  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7f99ac78e180,'0.95E2',9(27)>]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "items"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "merchants"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#new as HTML
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
  Parameters: {"identity_url"=>"https://www.google.com/"}
Completed 500 Internal Server Error in 25242ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'tAC6-5Jhf4bdIXvMwkoVag' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:37:52 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "tAC6-5Jhf4bdIXvMwkoVag"], ["updated_at", Sat, 18 Jan 2014 09:37:52 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'n8v3Pg5qP_WGSul2ZcrJ0A' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:37:52 UTC +00:00], ["identity_url", "a"], ["remember_token", "n8v3Pg5qP_WGSul2ZcrJ0A"], ["updated_at", Sat, 18 Jan 2014 09:37:52 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'awrMT-QtAIZ1A1YzNJ4dlA' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:37:52 UTC +00:00], ["remember_token", "awrMT-QtAIZ1A1YzNJ4dlA"], ["updated_at", Sat, 18 Jan 2014 09:37:52 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'awrMT-QtAIZ1A1YzNJ4dlA' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'awrMT-QtAIZ1A1YzNJ4dlA' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.6ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.9ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.9ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.9ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'ZqfiENQoHyEuUh_mqLXuSQ' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:39:39 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "ZqfiENQoHyEuUh_mqLXuSQ"], ["updated_at", Sat, 18 Jan 2014 09:39:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '4pWuUT9IQV-1slmqSQ5bGg' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:39:39 UTC +00:00], ["identity_url", "a"], ["remember_token", "4pWuUT9IQV-1slmqSQ5bGg"], ["updated_at", Sat, 18 Jan 2014 09:39:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'MemS9oxiKOUNv-xwhFCA-w' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["remember_token", "MemS9oxiKOUNv-xwhFCA-w"], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'MemS9oxiKOUNv-xwhFCA-w' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'MemS9oxiKOUNv-xwhFCA-w' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1[0m  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1  [["price", #<BigDecimal:7ffa6bca4460,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[35m (0.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2[0m  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mItem Load (0.2ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2  [["price", #<BigDecimal:7ffa6bdae608,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3[0m  [["price", #<BigDecimal:7ffa6be503b8,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:39:40 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7ffa6bf002e0,'0.95E2',9(27)>]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "merchants"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "items"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by DataImportsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 6ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#new as HTML
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'JGuHWyYveHjF1fuVtQ_yCA' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:39:44 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "JGuHWyYveHjF1fuVtQ_yCA"], ["updated_at", Sat, 18 Jan 2014 09:39:44 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 3934ms (ActiveRecord: 1.2ms)
  [1m[36m (2.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'cOJkZmCTwJnkWhPglNWXNw' LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:41:22 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "cOJkZmCTwJnkWhPglNWXNw"], ["updated_at", Sat, 18 Jan 2014 09:41:22 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 1141ms (ActiveRecord: 2.0ms)
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#create as HTML
Completed 500 Internal Server Error in 603ms
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'ByqFuAj6zkLeG5FvxK__Eg' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "ByqFuAj6zkLeG5FvxK__Eg"], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'eYNw708UtegEdwDvopWpdQ' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["remember_token", "eYNw708UtegEdwDvopWpdQ"], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'eYNw708UtegEdwDvopWpdQ' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'eYNw708UtegEdwDvopWpdQ' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'LA-a1rP7vlU4-_y0k38Xdg' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["identity_url", "a"], ["remember_token", "LA-a1rP7vlU4-_y0k38Xdg"], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1[0m  [["price", #<BigDecimal:7fbe7704c558,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2[0m  [["price", #<BigDecimal:7fbe75672d80,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3[0m  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3  [["price", #<BigDecimal:7fbe76808518,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:41:23 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)[0m  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fbe71840e18,'0.95E2',9(27)>]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "items"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "merchants"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.5ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.9ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.9ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'ULtGsIi3Z5bM0SZuRZ0oOg' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "ULtGsIi3Z5bM0SZuRZ0oOg"], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 1114ms (ActiveRecord: 1.6ms)
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#new as HTML
Completed 200 OK in 39ms (Views: 38.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1[0m  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1  [["price", #<BigDecimal:7fc58e8d1188,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2[0m  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mItem Load (0.3ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2  [["price", #<BigDecimal:7fc5900b3198,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3[0m  [["price", #<BigDecimal:7fc58f81eb18,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fc591004070,'0.95E2',9(27)>]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "merchants"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "items"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by DataImportsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'o983UUCQz5QJxzjbwJ8Ydg' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00], ["identity_url", "a"], ["remember_token", "o983UUCQz5QJxzjbwJ8Ydg"], ["updated_at", Sat, 18 Jan 2014 09:42:13 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'GV8LaeZ6yEfwoNSIfAWtCg' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:42:14 UTC +00:00], ["remember_token", "GV8LaeZ6yEfwoNSIfAWtCg"], ["updated_at", Sat, 18 Jan 2014 09:42:14 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'GV8LaeZ6yEfwoNSIfAWtCg' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'GV8LaeZ6yEfwoNSIfAWtCg' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'RusygRucsIVNvnRZIcOq7A' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:42:14 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "RusygRucsIVNvnRZIcOq7A"], ["updated_at", Sat, 18 Jan 2014 09:42:14 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.4ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.5ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1[0m  [["price", #<BigDecimal:7ff8870f3c50,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2[0m  [["price", #<BigDecimal:7ff8855ce510,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3[0m  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3  [["price", #<BigDecimal:7ff8857e88f0,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)[0m  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7ff8860c8560,'0.95E2',9(27)>]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "items"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "merchants"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#new as HTML
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'bgbKVJdyLt1vJv96Y2NC9Q' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "bgbKVJdyLt1vJv96Y2NC9Q"], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 11ms (ActiveRecord: 0.6ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'DTXFXa6H8oxLRWd1CNN8-A' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "DTXFXa6H8oxLRWd1CNN8-A"], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'qGEWda-cGykJZ7RntzNryA' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["identity_url", "a"], ["remember_token", "qGEWda-cGykJZ7RntzNryA"], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'FgWzQKW0Rxkg6tQilEhsAQ' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00], ["remember_token", "FgWzQKW0Rxkg6tQilEhsAQ"], ["updated_at", Sat, 18 Jan 2014 09:43:12 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'FgWzQKW0Rxkg6tQilEhsAQ' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'FgWzQKW0Rxkg6tQilEhsAQ' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.5ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'EMofgt9m2PWDPhubJHwhcQ' LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:45 UTC +00:00], ["identity_url", "a"], ["remember_token", "EMofgt9m2PWDPhubJHwhcQ"], ["updated_at", Sat, 18 Jan 2014 09:43:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'nLcQg_vrgH5uKHJBjL3kbA' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["remember_token", "nLcQg_vrgH5uKHJBjL3kbA"], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'nLcQg_vrgH5uKHJBjL3kbA' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'nLcQg_vrgH5uKHJBjL3kbA' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'u0s5cgVKa6OtdzYUkweM8w' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "u0s5cgVKa6OtdzYUkweM8w"], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 7ms (ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1[0m  [["price", #<BigDecimal:7fe801d4b2f0,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2[0m  [["price", #<BigDecimal:7fe801e92960,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3[0m  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3  [["price", #<BigDecimal:7fe801f3ad40,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:43:46 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)[0m  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fe808011178,'0.95E2',9(27)>]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "merchants"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "items"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'cqdQFkAf4lwRxcUM7HDjfg' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:44:24 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "cqdQFkAf4lwRxcUM7HDjfg"], ["updated_at", Sat, 18 Jan 2014 09:44:24 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 7ms (ActiveRecord: 1.3ms)
  [1m[36m (35.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.2ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.5ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.5ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by DataImportsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'bWBLCJ8w-2dCSmtrH91nEQ' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "bWBLCJ8w-2dCSmtrH91nEQ"], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 15ms (ActiveRecord: 1.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
Completed 200 OK in 34ms (Views: 34.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1[0m  [["price", #<BigDecimal:7f9246888a58,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.2ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2[0m  [["price", #<BigDecimal:7f9246a08d60,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3[0m  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3  [["price", #<BigDecimal:7f92470da620,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)[0m  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7f9247835e88,'0.95E2',9(27)>]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "merchants"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "items"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'fn9HDA0hiGZcphCl9Gt4Hw' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["identity_url", "a"], ["remember_token", "fn9HDA0hiGZcphCl9Gt4Hw"], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (1.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (40.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'jbd_-0zsJ_w0Qfap-qcpDQ' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["remember_token", "jbd_-0zsJ_w0Qfap-qcpDQ"], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'jbd_-0zsJ_w0Qfap-qcpDQ' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'jbd_-0zsJ_w0Qfap-qcpDQ' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'zTxOjBGBTSnUnu7pQKlwKQ' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "zTxOjBGBTSnUnu7pQKlwKQ"], ["updated_at", Sat, 18 Jan 2014 09:44:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.6ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.9ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'OIPFOBEqt12LepMPIlmvbg' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:45:47 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "OIPFOBEqt12LepMPIlmvbg"], ["updated_at", Sat, 18 Jan 2014 09:45:47 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '7jfgYQkJzs4ujHEAHjF5pQ' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:45:47 UTC +00:00], ["identity_url", "a"], ["remember_token", "7jfgYQkJzs4ujHEAHjF5pQ"], ["updated_at", Sat, 18 Jan 2014 09:45:47 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '-Bc0DKCyXKvK4IHdMmcYqQ' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["remember_token", "-Bc0DKCyXKvK4IHdMmcYqQ"], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '-Bc0DKCyXKvK4IHdMmcYqQ' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '-Bc0DKCyXKvK4IHdMmcYqQ' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1[0m  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1  [["price", #<BigDecimal:7fbc691c47b0,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[35m (0.9ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2[0m  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[35m (0.4ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2  [["price", #<BigDecimal:7fbc692f62a0,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3[0m  [["price", #<BigDecimal:7fbc693bd210,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fbc69484338,'0.95E2',9(27)>]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "items"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "merchants"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.2ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 6ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'sL9ER5byGim-FD3vmsXHyA' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "sL9ER5byGim-FD3vmsXHyA"], ["updated_at", Sat, 18 Jan 2014 09:45:48 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 3ms (ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.6ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (1.0ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.9ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.2ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '8AqhRo4Eg56AsKflk6SwVQ' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:48:00 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "8AqhRo4Eg56AsKflk6SwVQ"], ["updated_at", Sat, 18 Jan 2014 09:48:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 15ms (ActiveRecord: 1.2ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'OG-x6ew0MCRXyjmEu_SPqA' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "OG-x6ew0MCRXyjmEu_SPqA"], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'c5_8EUeyWYc3Hn-RX3ba0A' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["identity_url", "a"], ["remember_token", "c5_8EUeyWYc3Hn-RX3ba0A"], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Rv7tusa_ZeGb_Dp3WvMjmQ' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["remember_token", "Rv7tusa_ZeGb_Dp3WvMjmQ"], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Rv7tusa_ZeGb_Dp3WvMjmQ' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Rv7tusa_ZeGb_Dp3WvMjmQ' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1[0m  [["price", #<BigDecimal:7f8a173d98b8,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2[0m  [["price", #<BigDecimal:7f8a17561140,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3[0m  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3  [["price", #<BigDecimal:7f8a156ebb48,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:48:01 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)[0m  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7f8a16bd0748,'0.95E2',9(27)>]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "items"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "merchants"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.6ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.9ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'wl1mKtmSyCEzG9l2bBxBVg' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:13 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "wl1mKtmSyCEzG9l2bBxBVg"], ["updated_at", Sat, 18 Jan 2014 09:49:13 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 22ms (ActiveRecord: 1.5ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 5.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'EJ16v8tDSa5985E0BL4Dvw' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:13 UTC +00:00], ["remember_token", "EJ16v8tDSa5985E0BL4Dvw"], ["updated_at", Sat, 18 Jan 2014 09:49:13 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'EJ16v8tDSa5985E0BL4Dvw' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'EJ16v8tDSa5985E0BL4Dvw' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'u3PkaITup27GXwv3SUdjrQ' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:13 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "u3PkaITup27GXwv3SUdjrQ"], ["updated_at", Sat, 18 Jan 2014 09:49:13 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'chBReJeMRVy8TtRkCUJKmA' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:13 UTC +00:00], ["identity_url", "a"], ["remember_token", "chBReJeMRVy8TtRkCUJKmA"], ["updated_at", Sat, 18 Jan 2014 09:49:13 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.5ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:32 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:49:32 UTC +00:00]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:32 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:49:32 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1[0m  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:49:32 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:32 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:49:32 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1  [["price", #<BigDecimal:7f8d5810dd48,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2[0m  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2  [["price", #<BigDecimal:7f8d531dbba8,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3[0m  [["price", #<BigDecimal:7f8d5886ca80,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7f8d588d5620,'0.95E2',9(27)>]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "items"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "merchants"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'uc50ITYYAYssT28ErFptDQ' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "uc50ITYYAYssT28ErFptDQ"], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'hyzLoUHBnzKHDZ-LDT5uIQ' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["identity_url", "a"], ["remember_token", "hyzLoUHBnzKHDZ-LDT5uIQ"], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'RPnfP0VwPG5ix_7E_HaRLg' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["remember_token", "RPnfP0VwPG5ix_7E_HaRLg"], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'RPnfP0VwPG5ix_7E_HaRLg' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'RPnfP0VwPG5ix_7E_HaRLg' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.2ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 6ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'CP034ycMEM1qNRnIpdmV_g' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "CP034ycMEM1qNRnIpdmV_g"], ["updated_at", Sat, 18 Jan 2014 09:49:33 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 3ms (ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.6ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (1.0ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.5ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.5ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'eCOmeQnX-_2zoJe2GOcUQA' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "eCOmeQnX-_2zoJe2GOcUQA"], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '-oQjW8s29AJdfopfPELNEQ' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["identity_url", "a"], ["remember_token", "-oQjW8s29AJdfopfPELNEQ"], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '9J_P_EgReQpHNdr6ct6AfA' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["remember_token", "9J_P_EgReQpHNdr6ct6AfA"], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '9J_P_EgReQpHNdr6ct6AfA' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '9J_P_EgReQpHNdr6ct6AfA' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.2ms)
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 7ms (ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'WEbChjMa0xB1S9VbddxQ_A' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "WEbChjMa0xB1S9VbddxQ_A"], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 3ms (ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1[0m  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1  [["price", #<BigDecimal:7fb3c9b46d68,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2[0m  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2  [["price", #<BigDecimal:7fb3c9cb2f58,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3[0m  [["price", #<BigDecimal:7fb3c9d82ac8,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:49:56 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fb3c9e016c0,'0.95E2',9(27)>]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "merchants"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "items"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.6ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.9ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.9ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1[0m  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1  [["price", #<BigDecimal:7ffc6f225b78,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2[0m  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2  [["price", #<BigDecimal:7ffc6f22fa38,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3[0m  [["price", #<BigDecimal:7ffc7003c900,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7ffc6f255490,'0.95E2',9(27)>]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "merchants"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "items"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 7ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Ex1UNwhqWzzLJQGG4_gCmw' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "Ex1UNwhqWzzLJQGG4_gCmw"], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 12ms (ActiveRecord: 0.7ms)
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
Completed 200 OK in 4ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'JCuPR07he_jjD1HTFQOzkA' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00], ["identity_url", "a"], ["remember_token", "JCuPR07he_jjD1HTFQOzkA"], ["updated_at", Sat, 18 Jan 2014 09:50:30 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'dMWvma5iKmbBXk4FHQ7aAA' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:50:31 UTC +00:00], ["remember_token", "dMWvma5iKmbBXk4FHQ7aAA"], ["updated_at", Sat, 18 Jan 2014 09:50:31 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'dMWvma5iKmbBXk4FHQ7aAA' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'dMWvma5iKmbBXk4FHQ7aAA' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'vPABlWgvgros0J5g2PQl3w' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:50:31 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "vPABlWgvgros0J5g2PQl3w"], ["updated_at", Sat, 18 Jan 2014 09:50:31 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.6ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.9ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (1.0ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.2ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '2aubsy3csgbva89Wdok19w' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "2aubsy3csgbva89Wdok19w"], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 22ms (ActiveRecord: 1.4ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1[0m  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1  [["price", #<BigDecimal:7ff27ed56ce0,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2[0m  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2  [["price", #<BigDecimal:7ff27a9223a8,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3[0m  [["price", #<BigDecimal:7ff27abdb6a8,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7ff2800824e0,'0.95E2',9(27)>]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "items"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "merchants"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'jRDqFb90y5C9rcnimXVP4A' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "jRDqFb90y5C9rcnimXVP4A"], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'wZifOhc5K36qPRH59aq3WQ' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00], ["remember_token", "wZifOhc5K36qPRH59aq3WQ"], ["updated_at", Sat, 18 Jan 2014 09:51:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'wZifOhc5K36qPRH59aq3WQ' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'wZifOhc5K36qPRH59aq3WQ' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'WRvxaoLhFDop-zPStcQJ4Q' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:51:40 UTC +00:00], ["identity_url", "a"], ["remember_token", "WRvxaoLhFDop-zPStcQJ4Q"], ["updated_at", Sat, 18 Jan 2014 09:51:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.4ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'mtPcfDqdMw_QazNGr_VXYQ' LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["identity_url", "a"], ["remember_token", "mtPcfDqdMw_QazNGr_VXYQ"], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'uOUVdYgKNFkHbaa0Np7KEw' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["remember_token", "uOUVdYgKNFkHbaa0Np7KEw"], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'uOUVdYgKNFkHbaa0Np7KEw' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'uOUVdYgKNFkHbaa0Np7KEw' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'xgbgJ2Vlk-qcRIaUNDt5xQ' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "xgbgJ2Vlk-qcRIaUNDt5xQ"], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1[0m  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1  [["price", #<BigDecimal:7fe9e022fcf0,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2[0m  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2  [["price", #<BigDecimal:7fe9e034d970,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3[0m  [["price", #<BigDecimal:7fe9e0411be0,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fe9e04b3a08,'0.95E2',9(27)>]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "items"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "merchants"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 6ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'A5PP58jtJLKj69xQVMXYpA' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "A5PP58jtJLKj69xQVMXYpA"], ["updated_at", Sat, 18 Jan 2014 09:52:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 3ms (ActiveRecord: 0.6ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#new as HTML
Completed 200 OK in 5ms (Views: 5.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.6ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.9ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.2ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'c88Q2AJaLCxoUAM5jBQkfw' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:07 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "c88Q2AJaLCxoUAM5jBQkfw"], ["updated_at", Sat, 18 Jan 2014 09:52:07 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 23ms (ActiveRecord: 1.5ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'L9yh1Mfano0I5G963c4U_Q' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:07 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "L9yh1Mfano0I5G963c4U_Q"], ["updated_at", Sat, 18 Jan 2014 09:52:07 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'kGFtPOx5bPkiiYBLa7El5A' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:07 UTC +00:00], ["remember_token", "kGFtPOx5bPkiiYBLa7El5A"], ["updated_at", Sat, 18 Jan 2014 09:52:07 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'kGFtPOx5bPkiiYBLa7El5A' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'kGFtPOx5bPkiiYBLa7El5A' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'zSTqwhCjlNRRqFMM38-bvQ' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:07 UTC +00:00], ["identity_url", "a"], ["remember_token", "zSTqwhCjlNRRqFMM38-bvQ"], ["updated_at", Sat, 18 Jan 2014 09:52:07 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.4ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'zIMXd7fVckBs2amjoFr0pQ' LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:11 UTC +00:00], ["remember_token", "zIMXd7fVckBs2amjoFr0pQ"], ["updated_at", Sat, 18 Jan 2014 09:52:11 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'zIMXd7fVckBs2amjoFr0pQ' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'zIMXd7fVckBs2amjoFr0pQ' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '1hSKKajFjlYnKu-N2UIR8w' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:11 UTC +00:00], ["identity_url", "a"], ["remember_token", "1hSKKajFjlYnKu-N2UIR8w"], ["updated_at", Sat, 18 Jan 2014 09:52:11 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'H8fnQVqUnINAeub8ksBbfA' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:11 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "H8fnQVqUnINAeub8ksBbfA"], ["updated_at", Sat, 18 Jan 2014 09:52:11 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'WzLK96jY2PrRVfVYmqY5dg' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:12 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "WzLK96jY2PrRVfVYmqY5dg"], ["updated_at", Sat, 18 Jan 2014 09:52:12 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 9ms (ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
Completed 200 OK in 5ms (Views: 4.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.2ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.2ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'ttxGTnsr-puwMJdADtgZgA' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "ttxGTnsr-puwMJdADtgZgA"], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 22ms (ActiveRecord: 1.4ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '5VEOvfh2d4V_fSz9EPhVCA' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "5VEOvfh2d4V_fSz9EPhVCA"], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'xTpMkTgh-JnXJo4HR6UaKQ' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["remember_token", "xTpMkTgh-JnXJo4HR6UaKQ"], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'xTpMkTgh-JnXJo4HR6UaKQ' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'xTpMkTgh-JnXJo4HR6UaKQ' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (1.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'GSOdOI5XDlQik3H3sXOtNA' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["identity_url", "a"], ["remember_token", "GSOdOI5XDlQik3H3sXOtNA"], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1[0m  [["price", #<BigDecimal:7fe092d3e148,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2[0m  [["price", #<BigDecimal:7fe092ed7798,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3[0m  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3  [["price", #<BigDecimal:7fe08c8f40c0,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:16 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)[0m  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fe08c95cc60,'0.95E2',9(27)>]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "merchants"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "items"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.3ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (1.0ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.2ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1[0m  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1  [["price", #<BigDecimal:7f8a5f26a7f0,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2[0m  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2  [["price", #<BigDecimal:7f8a5f340170,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3[0m  [["price", #<BigDecimal:7f8a5b1d0ff0,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7f8a5b211b68,'0.95E2',9(27)>]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "items"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "merchants"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.2ms)
Completed 200 OK in 5ms (Views: 4.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '7Ejejx5mMUral2B7zE0Qaw' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "7Ejejx5mMUral2B7zE0Qaw"], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 18ms (ActiveRecord: 0.9ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '0RVmiuqDuBZ3EobT9kBc9g' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "0RVmiuqDuBZ3EobT9kBc9g"], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'QURJg6vAFdeW7_WnU8aatw' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["remember_token", "QURJg6vAFdeW7_WnU8aatw"], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'QURJg6vAFdeW7_WnU8aatw' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'QURJg6vAFdeW7_WnU8aatw' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'x8YpuOfhGl0U3ytfGRQQ6A' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00], ["identity_url", "a"], ["remember_token", "x8YpuOfhGl0U3ytfGRQQ6A"], ["updated_at", Sat, 18 Jan 2014 09:52:20 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.6ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (1.0ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.9ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1[0m  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1  [["price", #<BigDecimal:7fb6bebbb2b0,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2[0m  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2  [["price", #<BigDecimal:7fb6bec49fd8,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3[0m  [["price", #<BigDecimal:7fb6bf86ee30,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:23 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fb6bf8779b8,'0.95E2',9(27)>]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "merchants"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "items"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'xVpQziEluU287s9PECRjMA' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:24 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "xVpQziEluU287s9PECRjMA"], ["updated_at", Sat, 18 Jan 2014 09:52:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 't8DHAtAF7rNYoOsa6z2KZQ' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:24 UTC +00:00], ["remember_token", "t8DHAtAF7rNYoOsa6z2KZQ"], ["updated_at", Sat, 18 Jan 2014 09:52:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 't8DHAtAF7rNYoOsa6z2KZQ' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 't8DHAtAF7rNYoOsa6z2KZQ' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'XY49loZ5f6jchaObBT-f5g' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:24 UTC +00:00], ["identity_url", "a"], ["remember_token", "XY49loZ5f6jchaObBT-f5g"], ["updated_at", Sat, 18 Jan 2014 09:52:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.2ms)
Completed 200 OK in 4ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'RE0E_qbomW1crFNzKGs84w' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:24 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "RE0E_qbomW1crFNzKGs84w"], ["updated_at", Sat, 18 Jan 2014 09:52:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 9ms (ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (1.0ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.9ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.2ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Vp624js1uqvF2AM3cy4Shg' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "Vp624js1uqvF2AM3cy4Shg"], ["updated_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 15ms (ActiveRecord: 1.2ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Y5VC1G11IvshDhIrXENFDw' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "Y5VC1G11IvshDhIrXENFDw"], ["updated_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'upFJLK5r6CAwxFxYewakwA' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00], ["identity_url", "a"], ["remember_token", "upFJLK5r6CAwxFxYewakwA"], ["updated_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'N_yesFiHvwQBP15ys8E2MA' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00], ["remember_token", "N_yesFiHvwQBP15ys8E2MA"], ["updated_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'N_yesFiHvwQBP15ys8E2MA' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'N_yesFiHvwQBP15ys8E2MA' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00]]
  [1m[35m (0.9ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1[0m  [["price", #<BigDecimal:7fe15750f218,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00]]
  [1m[35m (0.9ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2[0m  [["price", #<BigDecimal:7fe1576c1890,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:27 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:28 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:28 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:28 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:52:28 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:28 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:52:28 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3[0m  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:52:28 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:28 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:52:28 UTC +00:00]]
  [1m[35m (1.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3  [["price", #<BigDecimal:7fe158015018,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:52:28 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:28 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:52:28 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:28 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:28 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:28 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:28 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:28 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:28 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:28 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:28 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)[0m  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fe1575fdc10,'0.95E2',9(27)>]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "merchants"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "items"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.4ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (1.0ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.2ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'AKwcZsf2SRjlMOHtTPvglA' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "AKwcZsf2SRjlMOHtTPvglA"], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 15ms (ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1[0m  [["price", #<BigDecimal:7f904e161a80,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2[0m  [["price", #<BigDecimal:7f904e39e6b8,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3[0m  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3  [["price", #<BigDecimal:7f904e471e00,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)[0m  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7f904e5007b8,'0.95E2',9(27)>]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "merchants"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "items"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'PpJqKmd1DIRoIrWQvACSUw' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "PpJqKmd1DIRoIrWQvACSUw"], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '84-OVunDUZvdhfrS1IED2g' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["identity_url", "a"], ["remember_token", "84-OVunDUZvdhfrS1IED2g"], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (1.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'gQVf-7C80OhRvaZPRImKvg' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00], ["remember_token", "gQVf-7C80OhRvaZPRImKvg"], ["updated_at", Sat, 18 Jan 2014 09:52:34 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'gQVf-7C80OhRvaZPRImKvg' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'gQVf-7C80OhRvaZPRImKvg' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.7ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.9ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.6ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.5ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.5ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.7ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.5ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'cpIKUapRNMdSPNPSPtqp9A' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:54:40 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "cpIKUapRNMdSPNPSPtqp9A"], ["updated_at", Sat, 18 Jan 2014 09:54:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Oq30nPVc_wdTuG54jsvfKQ' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:54:40 UTC +00:00], ["remember_token", "Oq30nPVc_wdTuG54jsvfKQ"], ["updated_at", Sat, 18 Jan 2014 09:54:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Oq30nPVc_wdTuG54jsvfKQ' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Oq30nPVc_wdTuG54jsvfKQ' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'wTv9aePqxFMldzGktdOoYQ' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["identity_url", "a"], ["remember_token", "wTv9aePqxFMldzGktdOoYQ"], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.2ms)
Completed 200 OK in 39ms (Views: 38.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'P7N5tge_8iUTvb2slK4YQA' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "P7N5tge_8iUTvb2slK4YQA"], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 9ms (ActiveRecord: 0.6ms)
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1[0m  [["price", #<BigDecimal:7fe4cf047480,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2[0m  [["price", #<BigDecimal:7fe4d0188550,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3[0m  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3  [["price", #<BigDecimal:7fe4d0288e78,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 09:54:41 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)[0m  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fe4d03a8380,'0.95E2',9(27)>]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "items"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "merchants"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
OpenIdAuthentication.store is nil. Using in-memory store.
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (2.6ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '17VqjmCfkVphOS1MdSXlCQ' LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  INSERT INTO "users" ("created_at", "remember_token", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["remember_token", "17VqjmCfkVphOS1MdSXlCQ"], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '17VqjmCfkVphOS1MdSXlCQ' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = '17VqjmCfkVphOS1MdSXlCQ' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Hvdu9mNpNqAQ1-nXvLTgGg' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["identity_url", "http://openid.com/myidentity"], ["remember_token", "Hvdu9mNpNqAQ1-nXvLTgGg"], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'hN7yZ14A6h9qOQZ7d1U26Q' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["identity_url", "a"], ["remember_token", "hN7yZ14A6h9qOQZ7d1U26Q"], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["name", "Snake Plissken"], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["name", "Bob's Pizza"], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 1[0m  [["address", "987 Fake St"], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["description", "$10 off $20 of food"], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 1  [["price", #<BigDecimal:7fb5f2599638,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["name", "Amy Pond"], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["name", "Tom's Awesome Shop"], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 2[0m  [["address", "456 Unreal Rd"], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["description", "$30 of awesome for $10"], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[35m (0.5ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 2  [["price", #<BigDecimal:7fb5f3fbb160,'0.1E2',9(18)>], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["name", "Marty McFly"], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["name", "Sneaker Store Emporium"], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ?, "updated_at" = ? WHERE "merchants"."id" = 3  [["address", "123 Fake St"], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["description", "$20 Sneakers for $5"], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ?, "updated_at" = ? WHERE "items"."id" = 3[0m  [["price", #<BigDecimal:7fb5f51c37e0,'0.5E1',9(18)>], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("created_at", "item_id", "merchant_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fb5f52f88b8,'0.95E2',9(27)>]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "items"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "merchants"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'eux4ZdWQj_0nOliglPT4LQ' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "identity_url", "remember_token", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00], ["identity_url", "https://www.google.com/"], ["remember_token", "eux4ZdWQj_0nOliglPT4LQ"], ["updated_at", Sat, 18 Jan 2014 10:06:43 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 9ms (ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#new as HTML
Completed 200 OK in 4ms (Views: 3.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.1ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (4.9ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'aJyFkwSNmHEXjcIdbj697Q' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("identity_url", "remember_token") VALUES (?, ?)  [["identity_url", "https://www.google.com/"], ["remember_token", "aJyFkwSNmHEXjcIdbj697Q"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 14ms (ActiveRecord: 0.7ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'wI4CFGm4xEzwx83r8weNxw' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("identity_url", "remember_token") VALUES (?, ?)[0m  [["identity_url", "a"], ["remember_token", "wI4CFGm4xEzwx83r8weNxw"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'l46w3SgOgnoTe9gvU6WSZw' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("remember_token") VALUES (?)  [["remember_token", "l46w3SgOgnoTe9gvU6WSZw"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'l46w3SgOgnoTe9gvU6WSZw' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'l46w3SgOgnoTe9gvU6WSZw' LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'ayMyo2D5rKKOnk1lYZQssw' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("identity_url", "remember_token") VALUES (?, ?)  [["identity_url", "http://openid.com/myidentity"], ["remember_token", "ayMyo2D5rKKOnk1lYZQssw"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
OpenIdAuthentication.store is nil. Using in-memory store.
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.2ms)[0m  DELETE FROM "data_imports";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'data_imports';
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "items";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'items';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "merchants";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'merchants';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchasers";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchasers';[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "users";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#create as HTML
  Parameters: {"openid_identifier"=>"https://www.google.com/"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'https://www.google.com/' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'QSBnmEVOw-TabrLtc843uA' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("identity_url", "remember_token") VALUES (?, ?)  [["identity_url", "https://www.google.com/"], ["remember_token", "QSBnmEVOw-TabrLtc843uA"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 20ms (ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#new as HTML
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by SessionsController#destroy as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by SessionsController#destroy as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1[0m
Redirected to http://test.host/session/new
Filter chain halted as :authenticate_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'J8D6xy3vLINUfYFHe5O5NQ' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("remember_token") VALUES (?)[0m  [["remember_token", "J8D6xy3vLINUfYFHe5O5NQ"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'J8D6xy3vLINUfYFHe5O5NQ' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'J8D6xy3vLINUfYFHe5O5NQ' LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."identity_url" IS NULL LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'http://openid.com/myidentity' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Jd2wfTcQN-lAWto3agzSmA' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("identity_url", "remember_token") VALUES (?, ?)[0m  [["identity_url", "http://openid.com/myidentity"], ["remember_token", "Jd2wfTcQN-lAWto3agzSmA"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."remember_token" = 'Xs_dqcZ4YUoH7TpgC4Rhaw' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("identity_url", "remember_token") VALUES (?, ?)  [["identity_url", "a"], ["remember_token", "Xs_dqcZ4YUoH7TpgC4Rhaw"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."remember_token" IS NULL LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."identity_url" = 'a' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchasers" ("name") VALUES (?)[0m  [["name", "Snake Plissken"]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Bob''s Pizza' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "merchants" ("name") VALUES (?)[0m  [["name", "Bob's Pizza"]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "merchants" SET "address" = ? WHERE "merchants"."id" = 1  [["address", "987 Fake St"]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$10 off $20 of food' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("description") VALUES (?)  [["description", "$10 off $20 of food"]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "items" SET "price" = ? WHERE "items"."id" = 1[0m  [["price", #<BigDecimal:7fca8d840f58,'0.1E2',9(18)>]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("item_id", "merchant_id", "purchaser_id") VALUES (?, ?, ?)  [["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "purchases" ("item_id", "merchant_id", "purchaser_id") VALUES (?, ?, ?)[0m  [["item_id", 1], ["merchant_id", 1], ["purchaser_id", 1]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Amy Pond' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "purchasers" ("name") VALUES (?)[0m  [["name", "Amy Pond"]]
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Tom''s Awesome Shop' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("name") VALUES (?)[0m  [["name", "Tom's Awesome Shop"]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "merchants" SET "address" = ? WHERE "merchants"."id" = 2  [["address", "456 Unreal Rd"]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = '$30 of awesome for $10' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "items" ("description") VALUES (?)  [["description", "$30 of awesome for $10"]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "items" SET "price" = ? WHERE "items"."id" = 2[0m  [["price", #<BigDecimal:7fca8d9ee440,'0.1E2',9(18)>]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "purchases" ("item_id", "merchant_id", "purchaser_id") VALUES (?, ?, ?)  [["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "purchases" ("item_id", "merchant_id", "purchaser_id") VALUES (?, ?, ?)[0m  [["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "purchases" ("item_id", "merchant_id", "purchaser_id") VALUES (?, ?, ?)  [["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "purchases" ("item_id", "merchant_id", "purchaser_id") VALUES (?, ?, ?)[0m  [["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "purchases" ("item_id", "merchant_id", "purchaser_id") VALUES (?, ?, ?)  [["item_id", 2], ["merchant_id", 2], ["purchaser_id", 2]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Marty McFly' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "purchasers" ("name") VALUES (?)  [["name", "Marty McFly"]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "merchants" ("name") VALUES (?)  [["name", "Sneaker Store Emporium"]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "merchants" SET "address" = ? WHERE "merchants"."id" = 3[0m  [["address", "123 Fake St"]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "items" ("description") VALUES (?)[0m  [["description", "$20 Sneakers for $5"]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "items" SET "price" = ? WHERE "items"."id" = 3  [["price", #<BigDecimal:7fca8da7e5e0,'0.5E1',9(18)>]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "purchases" ("item_id", "merchant_id", "purchaser_id") VALUES (?, ?, ?)[0m  [["item_id", 3], ["merchant_id", 3], ["purchaser_id", 3]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'Snake Plissken' LIMIT 1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'Sneaker Store Emporium' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = '$20 Sneakers for $5' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("item_id", "merchant_id", "purchaser_id") VALUES (?, ?, ?)[0m  [["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "purchases" ("item_id", "merchant_id", "purchaser_id") VALUES (?, ?, ?)  [["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "purchases" ("item_id", "merchant_id", "purchaser_id") VALUES (?, ?, ?)[0m  [["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1]]
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "purchases" ("item_id", "merchant_id", "purchaser_id") VALUES (?, ?, ?)  [["item_id", 3], ["merchant_id", 3], ["purchaser_id", 1]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "data_imports" ("filename", "purchases", "rows", "total_revenue") VALUES (?, ?, ?, ?)[0m  [["filename", "new_purchases.csv"], ["purchases", 12], ["rows", 4], ["total_revenue", #<BigDecimal:7fca8dad5c78,'0.95E2',9(27)>]]
  [1m[35m (0.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "items"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "merchants"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
